<!DOCTYPE html>
<html>
<body>
  <input type="file" id="fileInput" accept="image/*"><br>
  <img id="preview" width="200">
  <script>
    window.addEventListener("message", async function(event) {
      const blobUrl = event.data;
      const response = await fetch(blobUrl);
      const blob = await response.blob();

      const reader = new FileReader();
      reader.onloadend = function() {
        const base64 = reader.result;
        // ส่ง base64 กลับไปให้ Thunkable หรืออัปโหลด
        console.log("Base64 ready", base64);
        window.ReactNativeWebView.postMessage(base64); // ถ้าต้องส่งกลับไป
      };
      reader.readAsDataURL(blob); // แปลง blob เป็น base64
    });
  </script>
</body>
</html>
